Ncars = 50;
Nsteps = 20;

Car = fun(x, y){
   return { x:x; y:y; vx:0; vy:0; };
};


manycars = fun(n, xbnd ){
  carmap = {n:n;};
  x = 0;
  y = 0;
  vx = 0;
  vy = 0;
  n = n-1;
  print(n);
  while(n >= 0){
    print(n);
    c = Car(x,y);
    carmap[n] = c;
    x = x + 10;
    if(x > xbnd){ x = 0; y = y + 10; }
    c.vx = vx;
    c.vy = vy;
    n = n - 1;
    vx = vx + 1;
    if(vx > 2){ vx = 0; vy = vy + 1; }
    print(vy);
    if(vy > 2){ vy = 0; }
    print("fineciao");
  }
  return carmap;
};


print("Before sim");
cars = manycars(Ncars, 100);
print("During sim");

